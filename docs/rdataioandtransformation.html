<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>5 Data I/O and transformation | [UST 2021] 데이터 사이언스를 위한 R 프로그래밍</title>
  <meta name="description" content="데이터 사이언스를 위한 R 프로그래밍" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="5 Data I/O and transformation | [UST 2021] 데이터 사이언스를 위한 R 프로그래밍" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="데이터 사이언스를 위한 R 프로그래밍" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="5 Data I/O and transformation | [UST 2021] 데이터 사이언스를 위한 R 프로그래밍" />
  
  <meta name="twitter:description" content="데이터 사이언스를 위한 R 프로그래밍" />
  

<meta name="author" content="한국생명공학연구원 김하성" />


<meta name="date" content="2021-04-01" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="r-language-basics-ii-objects.html"/>
<link rel="next" href="rdatatransngrapics.html"/>
<script src="libs/header-attrs-2.7/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./"> 데이터 사이언스를 위한 R 프로그래밍 </a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction 강의 개요</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#goal-강의-목표"><i class="fa fa-check"></i><b>1.1</b> Goal 강의 목표</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#this-course"><i class="fa fa-check"></i><b>1.2</b> This course</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#tips"><i class="fa fa-check"></i><b>1.3</b> Tips</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#references-books-주요참고-교제"><i class="fa fa-check"></i><b>1.4</b> References books 주요/참고 교제</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#references-참고-자료"><i class="fa fa-check"></i><b>1.5</b> References 참고 자료</a></li>
<li class="chapter" data-level="1.6" data-path="index.html"><a href="index.html#evaluation-평가-세부-항목"><i class="fa fa-check"></i><b>1.6</b> Evaluation 평가 세부 항목</a></li>
<li class="chapter" data-level="1.7" data-path="index.html"><a href="index.html#schedule-강의-계획"><i class="fa fa-check"></i><b>1.7</b> Schedule 강의 계획</a></li>
<li class="chapter" data-level="1.8" data-path="index.html"><a href="index.html#r-lecture-youtube-link"><i class="fa fa-check"></i><b>1.8</b> R Lecture Youtube Link</a>
<ul>
<li class="chapter" data-level="1.8.1" data-path="index.html"><a href="index.html#lecture-1"><i class="fa fa-check"></i><b>1.8.1</b> Lecture 1</a></li>
<li class="chapter" data-level="1.8.2" data-path="index.html"><a href="index.html#lecture-2"><i class="fa fa-check"></i><b>1.8.2</b> Lecture 2</a></li>
<li class="chapter" data-level="1.8.3" data-path="index.html"><a href="index.html#lecture-3"><i class="fa fa-check"></i><b>1.8.3</b> Lecture 3</a></li>
<li class="chapter" data-level="1.8.4" data-path="index.html"><a href="index.html#lecture-4"><i class="fa fa-check"></i><b>1.8.4</b> Lecture 4</a></li>
<li class="chapter" data-level="1.8.5" data-path="index.html"><a href="index.html#lecture-5"><i class="fa fa-check"></i><b>1.8.5</b> Lecture 5</a></li>
<li class="chapter" data-level="1.8.6" data-path="index.html"><a href="index.html#lecture-6"><i class="fa fa-check"></i><b>1.8.6</b> Lecture 6</a></li>
<li class="chapter" data-level="1.8.7" data-path="index.html"><a href="index.html#lecture-7"><i class="fa fa-check"></i><b>1.8.7</b> Lecture 7</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="introduction-and-installation-of-rrstudio.html"><a href="introduction-and-installation-of-rrstudio.html"><i class="fa fa-check"></i><b>2</b> Introduction and installation of R/Rstudio</a>
<ul>
<li class="chapter" data-level="2.1" data-path="introduction-and-installation-of-rrstudio.html"><a href="introduction-and-installation-of-rrstudio.html#what-is-r-rstudio"><i class="fa fa-check"></i><b>2.1</b> What is R / Rstudio</a></li>
<li class="chapter" data-level="2.2" data-path="introduction-and-installation-of-rrstudio.html"><a href="introduction-and-installation-of-rrstudio.html#r-installation"><i class="fa fa-check"></i><b>2.2</b> R installation</a></li>
<li class="chapter" data-level="2.3" data-path="introduction-and-installation-of-rrstudio.html"><a href="introduction-and-installation-of-rrstudio.html#rstudio-installation"><i class="fa fa-check"></i><b>2.3</b> Rstudio installation</a></li>
<li class="chapter" data-level="2.4" data-path="introduction-and-installation-of-rrstudio.html"><a href="introduction-and-installation-of-rrstudio.html#rstudio-interface"><i class="fa fa-check"></i><b>2.4</b> Rstudio interface</a></li>
<li class="chapter" data-level="2.5" data-path="introduction-and-installation-of-rrstudio.html"><a href="introduction-and-installation-of-rrstudio.html#new-file-set-working-directory"><i class="fa fa-check"></i><b>2.5</b> New file &amp; Set working directory</a></li>
<li class="chapter" data-level="2.6" data-path="introduction-and-installation-of-rrstudio.html"><a href="introduction-and-installation-of-rrstudio.html#new-project"><i class="fa fa-check"></i><b>2.6</b> New project</a></li>
<li class="chapter" data-level="2.7" data-path="introduction-and-installation-of-rrstudio.html"><a href="introduction-and-installation-of-rrstudio.html#keyboard-shortcuts"><i class="fa fa-check"></i><b>2.7</b> Keyboard shortcuts</a></li>
<li class="chapter" data-level="2.8" data-path="introduction-and-installation-of-rrstudio.html"><a href="introduction-and-installation-of-rrstudio.html#hello-world"><i class="fa fa-check"></i><b>2.8</b> Hello world</a></li>
<li class="chapter" data-level="2.9" data-path="introduction-and-installation-of-rrstudio.html"><a href="introduction-and-installation-of-rrstudio.html#help"><i class="fa fa-check"></i><b>2.9</b> Help</a></li>
<li class="chapter" data-level="2.10" data-path="introduction-and-installation-of-rrstudio.html"><a href="introduction-and-installation-of-rrstudio.html#r-packages"><i class="fa fa-check"></i><b>2.10</b> R packages</a></li>
<li class="chapter" data-level="2.11" data-path="introduction-and-installation-of-rrstudio.html"><a href="introduction-and-installation-of-rrstudio.html#data-sets"><i class="fa fa-check"></i><b>2.11</b> Data sets</a></li>
<li class="chapter" data-level="2.12" data-path="introduction-and-installation-of-rrstudio.html"><a href="introduction-and-installation-of-rrstudio.html#cheatsheet"><i class="fa fa-check"></i><b>2.12</b> Cheatsheet</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="r-language-basics-i-objects.html"><a href="r-language-basics-i-objects.html"><i class="fa fa-check"></i><b>3</b> R language basics I - Objects</a>
<ul>
<li class="chapter" data-level="3.1" data-path="r-language-basics-i-objects.html"><a href="r-language-basics-i-objects.html#terminology"><i class="fa fa-check"></i><b>3.1</b> Terminology</a></li>
<li class="chapter" data-level="3.2" data-path="r-language-basics-i-objects.html"><a href="r-language-basics-i-objects.html#r-console-script"><i class="fa fa-check"></i><b>3.2</b> R console script</a></li>
<li class="chapter" data-level="3.3" data-path="r-language-basics-i-objects.html"><a href="r-language-basics-i-objects.html#what-is-a-programming-language"><i class="fa fa-check"></i><b>3.3</b> What is a programming language</a></li>
<li class="chapter" data-level="3.4" data-path="r-language-basics-i-objects.html"><a href="r-language-basics-i-objects.html#variables-and-values"><i class="fa fa-check"></i><b>3.4</b> Variables and values</a></li>
<li class="chapter" data-level="3.5" data-path="r-language-basics-i-objects.html"><a href="r-language-basics-i-objects.html#object---vectors"><i class="fa fa-check"></i><b>3.5</b> Object - Vectors</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="r-language-basics-i-objects.html"><a href="r-language-basics-i-objects.html#numeric"><i class="fa fa-check"></i><b>3.5.1</b> Numeric</a></li>
<li class="chapter" data-level="3.5.2" data-path="r-language-basics-i-objects.html"><a href="r-language-basics-i-objects.html#logical"><i class="fa fa-check"></i><b>3.5.2</b> Logical</a></li>
<li class="chapter" data-level="3.5.3" data-path="r-language-basics-i-objects.html"><a href="r-language-basics-i-objects.html#character"><i class="fa fa-check"></i><b>3.5.3</b> Character</a></li>
<li class="chapter" data-level="3.5.4" data-path="r-language-basics-i-objects.html"><a href="r-language-basics-i-objects.html#factor"><i class="fa fa-check"></i><b>3.5.4</b> Factor</a></li>
<li class="chapter" data-level="3.5.5" data-path="r-language-basics-i-objects.html"><a href="r-language-basics-i-objects.html#attribute"><i class="fa fa-check"></i><b>3.5.5</b> Attribute</a></li>
<li class="chapter" data-level="3.5.6" data-path="r-language-basics-i-objects.html"><a href="r-language-basics-i-objects.html#indexing"><i class="fa fa-check"></i><b>3.5.6</b> Indexing</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="r-language-basics-i-objects.html"><a href="r-language-basics-i-objects.html#object---matrix"><i class="fa fa-check"></i><b>3.6</b> Object - matrix</a></li>
<li class="chapter" data-level="3.7" data-path="r-language-basics-i-objects.html"><a href="r-language-basics-i-objects.html#object---data.frame"><i class="fa fa-check"></i><b>3.7</b> Object - data.frame</a></li>
<li class="chapter" data-level="3.8" data-path="r-language-basics-i-objects.html"><a href="r-language-basics-i-objects.html#object---list"><i class="fa fa-check"></i><b>3.8</b> Object - list</a></li>
<li class="chapter" data-level="3.9" data-path="r-language-basics-i-objects.html"><a href="r-language-basics-i-objects.html#missing-values"><i class="fa fa-check"></i><b>3.9</b> Missing values</a></li>
<li class="chapter" data-level="3.10" data-path="r-language-basics-i-objects.html"><a href="r-language-basics-i-objects.html#useful-functions-i"><i class="fa fa-check"></i><b>3.10</b> Useful functions I</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="r-language-basics-ii-objects.html"><a href="r-language-basics-ii-objects.html"><i class="fa fa-check"></i><b>4</b> R language basics II - Objects</a>
<ul>
<li class="chapter" data-level="4.1" data-path="r-language-basics-ii-objects.html"><a href="r-language-basics-ii-objects.html#a-script-in-r"><i class="fa fa-check"></i><b>4.1</b> A script in R</a></li>
<li class="chapter" data-level="4.2" data-path="r-language-basics-ii-objects.html"><a href="r-language-basics-ii-objects.html#functions"><i class="fa fa-check"></i><b>4.2</b> Functions</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="r-language-basics-ii-objects.html"><a href="r-language-basics-ii-objects.html#exercise-3-1-1"><i class="fa fa-check"></i><b>4.2.1</b> Exercise 3-1</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="r-language-basics-ii-objects.html"><a href="r-language-basics-ii-objects.html#vectorized-functions"><i class="fa fa-check"></i><b>4.3</b> Vectorized functions</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="r-language-basics-ii-objects.html"><a href="r-language-basics-ii-objects.html#exercise-3-2-1"><i class="fa fa-check"></i><b>4.3.1</b> Exercise 3-2</a></li>
<li class="chapter" data-level="4.3.2" data-path="r-language-basics-ii-objects.html"><a href="r-language-basics-ii-objects.html#exercise-3-3-1"><i class="fa fa-check"></i><b>4.3.2</b> Exercise 3-3</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="r-language-basics-ii-objects.html"><a href="r-language-basics-ii-objects.html#if-statements"><i class="fa fa-check"></i><b>4.4</b> if statements</a></li>
<li class="chapter" data-level="4.5" data-path="r-language-basics-ii-objects.html"><a href="r-language-basics-ii-objects.html#ifelse-statements"><i class="fa fa-check"></i><b>4.5</b> ifelse statements</a>
<ul>
<li class="chapter" data-level="4.5.1" data-path="r-language-basics-ii-objects.html"><a href="r-language-basics-ii-objects.html#exercise-3-4-1"><i class="fa fa-check"></i><b>4.5.1</b> Exercise 3-4</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="r-language-basics-ii-objects.html"><a href="r-language-basics-ii-objects.html#for-while-repeat"><i class="fa fa-check"></i><b>4.6</b> for, while, repeat</a></li>
<li class="chapter" data-level="4.7" data-path="r-language-basics-ii-objects.html"><a href="r-language-basics-ii-objects.html#avoiding-loops"><i class="fa fa-check"></i><b>4.7</b> Avoiding Loops</a></li>
<li class="chapter" data-level="4.8" data-path="r-language-basics-ii-objects.html"><a href="r-language-basics-ii-objects.html#object-oriented-programming-advanced"><i class="fa fa-check"></i><b>4.8</b> Object Oriented Programming (Advanced)</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="rdataioandtransformation.html"><a href="rdataioandtransformation.html"><i class="fa fa-check"></i><b>5</b> Data I/O and transformation</a>
<ul>
<li class="chapter" data-level="5.1" data-path="rdataioandtransformation.html"><a href="rdataioandtransformation.html#loading-data-into-r"><i class="fa fa-check"></i><b>5.1</b> Loading data into R</a></li>
<li class="chapter" data-level="5.2" data-path="rdataioandtransformation.html"><a href="rdataioandtransformation.html#writing-data-into-a-text-file"><i class="fa fa-check"></i><b>5.2</b> writing data into a text file</a></li>
<li class="chapter" data-level="5.3" data-path="rdataioandtransformation.html"><a href="rdataioandtransformation.html#excel-file-read"><i class="fa fa-check"></i><b>5.3</b> Excel file read</a></li>
<li class="chapter" data-level="5.4" data-path="rdataioandtransformation.html"><a href="rdataioandtransformation.html#subset"><i class="fa fa-check"></i><b>5.4</b> subset</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="rdataioandtransformation.html"><a href="rdataioandtransformation.html#exercise-5.1"><i class="fa fa-check"></i><b>5.4.1</b> Exercise 5.1</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="rdataioandtransformation.html"><a href="rdataioandtransformation.html#merging-and-split"><i class="fa fa-check"></i><b>5.5</b> merging and split</a></li>
<li class="chapter" data-level="5.6" data-path="rdataioandtransformation.html"><a href="rdataioandtransformation.html#transforming-data"><i class="fa fa-check"></i><b>5.6</b> transforming data</a>
<ul>
<li class="chapter" data-level="5.6.1" data-path="rdataioandtransformation.html"><a href="rdataioandtransformation.html#ex5.6.1"><i class="fa fa-check"></i><b>5.6.1</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="rdataioandtransformation.html"><a href="rdataioandtransformation.html#analysis-example-babies-dataset"><i class="fa fa-check"></i><b>5.7</b> Analysis example (babies dataset)</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="rdatatransngrapics.html"><a href="rdatatransngrapics.html"><i class="fa fa-check"></i><b>6</b> Data transformation and basic graphics</a>
<ul>
<li class="chapter" data-level="6.1" data-path="rdatatransngrapics.html"><a href="rdatatransngrapics.html#apply"><i class="fa fa-check"></i><b>6.1</b> apply</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="rdatatransngrapics.html"><a href="rdatatransngrapics.html#ex6.1.1"><i class="fa fa-check"></i><b>6.1.1</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="rdatatransngrapics.html"><a href="rdatatransngrapics.html#scatter-plot"><i class="fa fa-check"></i><b>6.2</b> scatter plot</a></li>
<li class="chapter" data-level="6.3" data-path="rdatatransngrapics.html"><a href="rdatatransngrapics.html#histogram"><i class="fa fa-check"></i><b>6.3</b> histogram</a></li>
<li class="chapter" data-level="6.4" data-path="rdatatransngrapics.html"><a href="rdatatransngrapics.html#boxplot"><i class="fa fa-check"></i><b>6.4</b> boxplot</a></li>
<li class="chapter" data-level="6.5" data-path="rdatatransngrapics.html"><a href="rdatatransngrapics.html#barplot"><i class="fa fa-check"></i><b>6.5</b> barplot</a>
<ul>
<li class="chapter" data-level="6.5.1" data-path="rdatatransngrapics.html"><a href="rdatatransngrapics.html#ex6.5.1"><i class="fa fa-check"></i><b>6.5.1</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="rdatatransngrapics.html"><a href="rdatatransngrapics.html#draw-multiple-graphs-in-the-same-plot"><i class="fa fa-check"></i><b>6.6</b> Draw multiple graphs in the same plot</a>
<ul>
<li class="chapter" data-level="6.6.1" data-path="rdatatransngrapics.html"><a href="rdatatransngrapics.html#ex6.6.1"><i class="fa fa-check"></i><b>6.6.1</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="6.7" data-path="rdatatransngrapics.html"><a href="rdatatransngrapics.html#usuful-functions-ii"><i class="fa fa-check"></i><b>6.7</b> Usuful functions II</a>
<ul>
<li class="chapter" data-level="6.7.1" data-path="rdatatransngrapics.html"><a href="rdatatransngrapics.html#ex6.7.1"><i class="fa fa-check"></i><b>6.7.1</b> Exercise</a></li>
<li class="chapter" data-level="6.7.2" data-path="rdatatransngrapics.html"><a href="rdatatransngrapics.html#ex6.7.2"><i class="fa fa-check"></i><b>6.7.2</b> Exercise</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">[UST 2021] 데이터 사이언스를 위한 R 프로그래밍</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="rdataioandtransformation" class="section level1" number="5">
<h1><span class="header-section-number">5</span> Data I/O and transformation</h1>
<ul>
<li><a href="https://youtu.be/uQPU8qyFCIk" class="uri">https://youtu.be/uQPU8qyFCIk</a></li>
</ul>
<p>일반적인 데이터 분석은 데이터 전처리(변환), 가시화, 모델링(통계분석)의 반복적인 수행으로 진행될 수 있습니다. R에서는 <code>data.frame</code> 형식의 데이터 타입이 주로 사용되며 (최근 <code>tibble</code>형식) 따라서 <code>data.frame</code> 기반의 데이터를 다루기 위한 다양한 함수를 익힐 필요가 있습니다. 이번 강의에서는 <code>data.frame</code> 데이터를 읽거나 쓰는 함수들과 함께 데이터 전처리를 (변환) 위한 함수들을 배워보겠습니다.</p>
<p>앞에서 배웠던 데이터를 저장하는 object의 종류를 먼저 간략히 정리해 봅니다.</p>
<ul>
<li>Vectors - 같은 타입의 데이터를 (Numeric, character, factor, …) 저장한 오브젝트 타입으로 인덱스는 <code>[</code>, <code>]</code> 사용.</li>
<li>Lists - 여러개의 <code>vector</code>를 원소로 가질 수 있으며 이 원소들은 문자나 숫자 어떤 데이터 타입도 가능하고 길이가 달라도 됨. list의 인덱싱에서 <code>[</code> <code>]</code>는 리스트를 반환하고 <code>[[</code> <code>]]</code>는 vector를 반환함.</li>
<li>Matrices - 같은 타입의 데이터로 채워진 2차원 행렬이며 인덱스는 <code>[i, j]</code> 형태로 i는 row, j는 column 을 나타냄. 메트릭스의 생성은 <code>matrix</code> 명령어를 사용하며 왼쪽부터 column 값을 모두 채우고 다음 컬럼 값을 채워 나가는 것이 기본 설정이며 <code>byrow=T</code> 를 통해 row를 먼저 채울수도 있음. row와 column 이름은 <code>rownames</code>와 <code>colnames</code>로 설정이 가능하며 <code>rbind</code>와 <code>cbind</code>로 두 행렬 또는 행렬과 백터를 연결할 수 있음 ( <code>rbind</code>와 <code>cbind</code>의 경우 행렬이 커지면 컴퓨터 리소스 많이 사용함)</li>
<li>data.frame - <code>list</code>와 <code>matrix</code>의 특성을 모두 갖는 오브젝트 타입으로 <code>list</code>와 같이 다른 타입의 <code>vector</code>형 변수 여러개가 컬럼에 붙어서 <code>matrix</code> 형태로 구성됨. 단, <code>list</code>와는 다르게 각 변수의 길이가 (row의 길이) 같아야 함. <code>$</code> 기호로 각 변수들을 인덱싱(접근) 할 수 있고 matrix와 같이 <code>[i,j]</code> 형태의 인덱싱도 가능.</li>
</ul>
<div id="loading-data-into-r" class="section level2" number="5.1">
<h2><span class="header-section-number">5.1</span> Loading data into R</h2>
<p>데이터 분석을 위해서 가장 먼저 할 일은 데이터를 R로 읽어들이는 것 입니다. <a href="http://2.droppdf.com/files/5aTvl/bioinformatics-data-skills.pdf">Bioinformatics Data Skills by Vince Buffalo</a>의 Chapter 8에서 소개한 데이터 중 일부인 <a href="Dataset_S1_sub.txt">Dataset_S1_sub.txt</a>를 이용하겠습니다. 대부분의 텍스트 파일은 아래와 같이 <code>csv</code> 또는 <code>txt</code> 파일로 저장하여 메모장으로 열어 확인할 수 있으며 읽어올 때 구분자 (sep 파라메터) 나 header를 (header 파라메터) 읽을지 등을 옵션으로 지정할 수 있습니다.</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="rdataioandtransformation.html#cb52-1" aria-hidden="true" tabindex="-1"></a>dat <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;Dataset_S1_sub.txt&quot;</span>)</span>
<span id="cb52-2"><a href="rdataioandtransformation.html#cb52-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(dat)</span></code></pre></div>
<p>Dataset_S1_sub.txt 파일을 열어보면 다음과 같이 header와 “,”로 구분되어 있는 것을 볼 수 있습니다. <code>read.csv</code> 함수의 도움말을 보면 이 함수의 파라메터 head와 sep이 기본값으로 <code>T</code>와 <code>,</code>로 되어 있는 것을 볼 수 있습니다. <code>read.csv</code> 외에도 <code>read.table</code>, <code>read.delim</code> 등의 함수를 이용해서 택스트 파일을 읽어올 수 있습니다.</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="rdataioandtransformation.html#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(dat)</span></code></pre></div>
<p>참고로 위 데이터는 wide형 데이터 입니다. wide형 데이터는 일반적인 excel에서의 데이터 형태로 column은 변수, row는 샘플이 저장됩니다. 만약 새로운 변수가 추가 되면 column 오른쪽에 붙어 wide하게 확장되고 데이터(샘플)이 추가되면 아래에 붙어서 row가 추가 됩니다.</p>
<div class="figure">
<img src="images/04/wide.JPG" width="548" alt="" />
<p class="caption">출처: Bioinformatics Data Skills by Vince Buffalo</p>
</div>
<p>반면 long 형 데이터는 아래와 같이 일반적으로 3개의 컬럼을 갖습니다. 이 경우 변수든 샘플이든 새로운 데이터가 추가될 경우 아래로 확장됩니다. wide형과 long형에 대한 추가 설명은 다음 강의에서 진행하도록 하겠습니다.</p>
<div class="figure">
<img src="images/04/long.JPG" width="552" alt="" />
<p class="caption">출처: Bioinformatics Data Skills by Vince Buffalo</p>
</div>
</div>
<div id="writing-data-into-a-text-file" class="section level2" number="5.2">
<h2><span class="header-section-number">5.2</span> writing data into a text file</h2>
<p>읽어들이거나 분석한 결과에 대한 데이터는 <code>write.table</code> 또는 <code>write.csv</code> 함수를 사용하여 텍스트 파일의 형태로 저장할 수 있습니다. 이 경우 알아둘 파라메터는 <code>quote</code>, <code>row.names</code>, <code>col.names</code>, <code>sep</code> 등이 있습니다.</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="rdataioandtransformation.html#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write.table</span>(dat, <span class="at">file=</span><span class="st">&quot;table_write.txt&quot;</span>)</span>
<span id="cb54-2"><a href="rdataioandtransformation.html#cb54-2" aria-hidden="true" tabindex="-1"></a><span class="fu">write.table</span>(dat, <span class="at">file=</span><span class="st">&quot;table_write.txt&quot;</span>, <span class="at">quote=</span>F)</span>
<span id="cb54-3"><a href="rdataioandtransformation.html#cb54-3" aria-hidden="true" tabindex="-1"></a><span class="fu">write.table</span>(dat, <span class="at">file=</span><span class="st">&quot;table_write.txt&quot;</span>, <span class="at">quote=</span>F, <span class="at">row.names=</span>F)</span>
<span id="cb54-4"><a href="rdataioandtransformation.html#cb54-4" aria-hidden="true" tabindex="-1"></a><span class="fu">write.table</span>(dat, <span class="at">file=</span><span class="st">&quot;table_write.txt&quot;</span>, <span class="at">quote=</span>F, <span class="at">row.names=</span>F, <span class="at">sep=</span><span class="st">&quot;,&quot;</span>)</span>
<span id="cb54-5"><a href="rdataioandtransformation.html#cb54-5" aria-hidden="true" tabindex="-1"></a><span class="fu">write.table</span>(dat, <span class="at">file=</span><span class="st">&quot;table_write.csv&quot;</span>, <span class="at">quote=</span>F, <span class="at">row.names=</span>F, <span class="at">sep=</span><span class="st">&quot;,&quot;</span>)</span></code></pre></div>
</div>
<div id="excel-file-read" class="section level2" number="5.3">
<h2><span class="header-section-number">5.3</span> Excel file read</h2>
<p>텍스트 파일 외에 엑셀파일은 <code>readxl</code> 이라는 R 패키지를 활용하여 읽거나 쓸 수 있습니다. 패키지는 다음과 같은 방법으로 설치할 수 있으며 <code>read_excel</code> 이라는 함수를 사용해서 데이터를 읽어들일 수 있습니다.</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="rdataioandtransformation.html#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>)</span>
<span id="cb55-2"><a href="rdataioandtransformation.html#cb55-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span></code></pre></div>
<p>실습 파일은 형광 세포를 배양하여 형광리더기를 이용해 얻어진 실제 데이터이며 <a href="Exp_data.xls">Exp_data.xls</a> 에서 다운로드 받을 수 있습니다. <code>read_excel</code> 함수를 이용하여 파일의 내용을 읽어오면 기본 자료형이 tibble 입니다. tibble은 최근 많이 쓰이는 R object로 data.frame과 유사하나 입력값의 type, name, rowname을 임으로 바꿀 수 없다는 점이 다릅니다.</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="rdataioandtransformation.html#cb56-1" aria-hidden="true" tabindex="-1"></a>dat <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">&quot;Exp_data.xls&quot;</span>, <span class="at">sheet=</span><span class="dv">1</span>, <span class="at">skip =</span> <span class="dv">0</span>, <span class="at">col_names=</span>T)</span></code></pre></div>
<p>엑셀파일에는 두 종류의 (<span class="math inline">\(OD600_{nm}\)</span>, Fluorescence) 데이터가 저장되어 있습니다. 첫 번째 sheet에는 다음처럼 wide형 데이터가 저장되어 있습니다.</p>
<p><img src="images/04/excelfile01.PNG" /></p>
</div>
<div id="subset" class="section level2" number="5.4">
<h2><span class="header-section-number">5.4</span> subset</h2>
<p>R에서 데이터 저장은 <code>data.frame</code>이나 <code>matrix</code> 타입을 일반적으로 사용합니다. 이 데이터의 일부 열 또는 행의 데이터만을 가져와서 별도로 저장하거나 분석이 필요할 경우가 있습니다. 이 때 인덱싱을 사용해서 일부 데이터를 선택하고 사용할 수 있으며 <code>subset</code> 함수도 이러한 선별 기능을 제공합니다. <code>subset</code>은 행과 열 모두를 선별할 수 있는 함수입니다. 다음 <code>airquality</code> 데이터는 1973년 날짜별로 뉴욕의 공기질을 측정한 데이터 입니다. <code>NA</code>를 제외한 나머지 데이터만으로 새로운 데이터셋을 만들어 봅시다. <code>is.na</code>함수를 사용하면 해당 데이터가 <code>NA</code>일 경우 <code>TRUE</code>, <code>NA</code>가 아닐 경우 <code>FALSE</code> 를 반환해 줍니다.</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="rdataioandtransformation.html#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.na</span>(airquality<span class="sc">$</span>Ozone)</span>
<span id="cb57-2"><a href="rdataioandtransformation.html#cb57-2" aria-hidden="true" tabindex="-1"></a>ozone_complete1 <span class="ot">&lt;-</span> airquality[<span class="sc">!</span><span class="fu">is.na</span>(airquality<span class="sc">$</span>Ozone),]</span>
<span id="cb57-3"><a href="rdataioandtransformation.html#cb57-3" aria-hidden="true" tabindex="-1"></a>ozone_complete1 <span class="ot">&lt;-</span> <span class="fu">subset</span>(airquality, <span class="sc">!</span><span class="fu">is.na</span>(Ozone))</span></code></pre></div>
<p>위 ozone_complete1와 ozone_complete2는 같은 결과를 보입니다. 그러나 ozone_complete1 보다는 ozone_complete2 코드가 훨씬 직관적이고 가독성이 높습니다. 특히 <code>airquality$ozone</code> 로 <code>$</code>를 사용하여 변수에 접근한 것이 아닌 <code>Ozone</code>이라는 변수 이름을 직접 사용해서 접근함으로써 코드의 간결성과 가독성을 유지할 수 있습니다. 또한 <code>subset</code>의 <code>select</code> 옵션을 이용해서 변수를 선택할 수도 있으며 <code>&amp;</code>(AND)와 <code>|</code>(OR) 연산자를 사용해서 조건을 두 개 이상 설정할 수 있습니다. 아래 <code>select</code> 옵션에서 <code>-</code>는 해당 변수를 제외한다는 의미 입니다.</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="rdataioandtransformation.html#cb58-1" aria-hidden="true" tabindex="-1"></a>ozone_complete3 <span class="ot">&lt;-</span> <span class="fu">subset</span>(airquality, <span class="sc">!</span><span class="fu">is.na</span>(ozone), <span class="at">select=</span><span class="fu">c</span>(ozone, temp, month, day))</span>
<span id="cb58-2"><a href="rdataioandtransformation.html#cb58-2" aria-hidden="true" tabindex="-1"></a>ozone_complete4 <span class="ot">&lt;-</span> <span class="fu">subset</span>(airquality, <span class="sc">!</span><span class="fu">is.na</span>(ozone) <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(solar.r), <span class="at">select=</span><span class="fu">c</span>(<span class="sc">-</span>month, <span class="sc">-</span>day))</span></code></pre></div>
<div id="exercise-5.1" class="section level3" number="5.4.1">
<h3><span class="header-section-number">5.4.1</span> Exercise 5.1</h3>
<p>airquality 데이터에서 <code>Temp</code>와 <code>Ozone</code> 변수로 이루어진 df라는 이름의 <code>data.frame</code>을 만드시오 (단 <code>NA</code>가 있는 샘플(열)은 모두 제외하시오)</p>
</div>
</div>
<div id="merging-and-split" class="section level2" number="5.5">
<h2><span class="header-section-number">5.5</span> merging and split</h2>
<p><code>merge</code> 함수는 두 개 이상의 데이터셋을 통합하는 기능을 수행하는 함수입니다. 특히 <code>rbind</code>나 <code>cbind</code>와는 다르게, 결합하는 두 데이터에 공통적이거나 한 쪽의 데이터를 기준으로 결합을 수행 합니다. <code>?merge</code>를 참고하면 <code>by</code>, <code>by.x</code>, <code>by.y</code>, <code>all</code>, <code>all.x</code>, <code>all.y</code> 등의 옵션으로 이러한 설정을 수행할 수 있습니다. 간단한 예제를 통해서 이해해 보겠습니다.</p>
<p>10명의 사람이 있고 이 사람들의 나이와 성별을 각각 나타낸 두 데이터셋이 있습니다. 그런데 df1은 나이만을 df2는 성별 정보만을 가지고 있으며 두 정보 모두 제공된 사람은 3명 (인덱스 4,5,6) 뿐입니다. 이제 merge를 이용해서 두 데이터셋을 결합해 보겠습니다.</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="rdataioandtransformation.html#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="do">## merge</span></span>
<span id="cb59-2"><a href="rdataioandtransformation.html#cb59-2" aria-hidden="true" tabindex="-1"></a>df1 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">id=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>), <span class="at">age=</span><span class="fu">c</span>(<span class="dv">30</span>, <span class="dv">41</span>, <span class="dv">33</span>, <span class="dv">56</span>, <span class="dv">20</span>, <span class="dv">17</span>))</span>
<span id="cb59-3"><a href="rdataioandtransformation.html#cb59-3" aria-hidden="true" tabindex="-1"></a>df2 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">id=</span><span class="fu">c</span>(<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>,<span class="dv">7</span>,<span class="dv">8</span>,<span class="dv">9</span>), <span class="at">gender=</span><span class="fu">c</span>(<span class="st">&quot;f&quot;</span>, <span class="st">&quot;f&quot;</span>, <span class="st">&quot;m&quot;</span>, <span class="st">&quot;m&quot;</span>, <span class="st">&quot;f&quot;</span>, <span class="st">&quot;m&quot;</span>))</span>
<span id="cb59-4"><a href="rdataioandtransformation.html#cb59-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-5"><a href="rdataioandtransformation.html#cb59-5" aria-hidden="true" tabindex="-1"></a>df_inner <span class="ot">&lt;-</span> <span class="fu">merge</span>(df1, df2, <span class="at">by=</span><span class="st">&quot;id&quot;</span>, <span class="at">all=</span>F)</span>
<span id="cb59-6"><a href="rdataioandtransformation.html#cb59-6" aria-hidden="true" tabindex="-1"></a>df_outer <span class="ot">&lt;-</span> <span class="fu">merge</span>(df1, df2, <span class="at">by=</span><span class="st">&quot;id&quot;</span>, <span class="at">all=</span>T)</span>
<span id="cb59-7"><a href="rdataioandtransformation.html#cb59-7" aria-hidden="true" tabindex="-1"></a>df_left_outer <span class="ot">&lt;-</span> <span class="fu">merge</span>(df1, df2, <span class="at">by=</span><span class="st">&quot;id&quot;</span>, <span class="at">all.x=</span>T)</span>
<span id="cb59-8"><a href="rdataioandtransformation.html#cb59-8" aria-hidden="true" tabindex="-1"></a>df_right_outer <span class="ot">&lt;-</span> <span class="fu">merge</span>(df1, df2, <span class="at">by=</span><span class="st">&quot;id&quot;</span>, <span class="at">all.y=</span>T)</span></code></pre></div>
<p>만약 두 데이터셋의 id가 다를 경우나 각각 다른 기준으로 결합해야 하는 경우는 <code>by</code>대신 <code>by.x</code>, <code>by.y</code> 옵션을 사용할 수 있습니다.</p>
<p><code>split</code> 함수는 데이터를 특정 기준으로 나누는 역할을 하며 해당 기준은 factor 형 벡터 형태로 주어질 수 있습니다. 예를 들어 <code>airquality</code> 데이터의 <code>month</code> 변수를 기준으로 데이터를 분리해 보겠습니다.</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="rdataioandtransformation.html#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(airquality)</span>
<span id="cb60-2"><a href="rdataioandtransformation.html#cb60-2" aria-hidden="true" tabindex="-1"></a>g <span class="ot">&lt;-</span> <span class="fu">factor</span>(airquality<span class="sc">$</span>Month)</span>
<span id="cb60-3"><a href="rdataioandtransformation.html#cb60-3" aria-hidden="true" tabindex="-1"></a>airq_split <span class="ot">&lt;-</span> <span class="fu">split</span>(airquality, g)</span>
<span id="cb60-4"><a href="rdataioandtransformation.html#cb60-4" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(airq_split)</span>
<span id="cb60-5"><a href="rdataioandtransformation.html#cb60-5" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(airq_split)</span></code></pre></div>
<p>위와 같이 <code>airq_split</code>은 길이가 5인 (5, 6, 7, 8, 9월) <code>list</code>타입이 되었고 각 요소는 서로 다른 size의 <code>data.frame</code>형으로 구성 된 것을 확인할 수 있습니다.</p>
</div>
<div id="transforming-data" class="section level2" number="5.6">
<h2><span class="header-section-number">5.6</span> transforming data</h2>
<p>R에서 기존 가지고 있는 데이터의 변경은 새로운 변수의 추가, 삭제, 변형과 샘플의 추가, 삭제, 변형을 생각해 볼 수 있습니다. 이러한 기능은 앞에서 배운 <code>merge</code>, <code>split</code>이나 <code>rbind</code>, <code>cbind</code>, 그리고 인덱싱을 활용한 값 변경 등의 방법을 이용할 수 있습니다. 또한 가장 직관적으로 필요한 변수들을 기존 데이터셋에서 추출한 후 <code>data.frame</code> 명령어를 사용해서 새로운 데이터셋으로 만들어주면 될 것 입니다.</p>
<p>이러한 방법들 외에 <code>within</code>을 사용할 경우 특정 변수의 변형과 이를 반영한 새로운 데이터셋을 어렵지 않게 만들수 있습니다. <code>with</code> 함수의 사용 예와 함께 <code>within</code> 함수를 사용하여 데이터를 변형하는 예를 살펴봅니다. <code>with</code>나 <code>within</code> 함수는 R을 활용하는데 많이 사용되는 함수들은 아닙니다. 또한 이러한 기능들은 <code>dplyr</code> 등의 패키지에서 제공하는 경우가 많아서 필수적으로 익힐 부분은 아닙니다. 그러나 개념적인 이해를 돕기위한 좋은 도구들이며 여전히 고수준의 R 사용자들이 코드에 사용하고 있는 함수들이므로 알아두는 것이 좋습니다.</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="rdataioandtransformation.html#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="do">## without with</span></span>
<span id="cb61-2"><a href="rdataioandtransformation.html#cb61-2" aria-hidden="true" tabindex="-1"></a>ozone_complete <span class="ot">&lt;-</span> airquality[<span class="sc">!</span><span class="fu">is.na</span>(airquality<span class="sc">$</span>Ozone),<span class="st">&quot;Ozone&quot;</span>]</span>
<span id="cb61-3"><a href="rdataioandtransformation.html#cb61-3" aria-hidden="true" tabindex="-1"></a>temp_complete <span class="ot">&lt;-</span> airquality[<span class="sc">!</span><span class="fu">is.na</span>(airquality<span class="sc">$</span>Temp),<span class="st">&quot;Temp&quot;</span>]</span>
<span id="cb61-4"><a href="rdataioandtransformation.html#cb61-4" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">mean</span>(ozone_complete))</span>
<span id="cb61-5"><a href="rdataioandtransformation.html#cb61-5" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">mean</span>(temp_complete))</span>
<span id="cb61-6"><a href="rdataioandtransformation.html#cb61-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-7"><a href="rdataioandtransformation.html#cb61-7" aria-hidden="true" tabindex="-1"></a><span class="do">## with</span></span>
<span id="cb61-8"><a href="rdataioandtransformation.html#cb61-8" aria-hidden="true" tabindex="-1"></a><span class="fu">with</span>(airquality, {</span>
<span id="cb61-9"><a href="rdataioandtransformation.html#cb61-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">mean</span>(Ozone[<span class="sc">!</span><span class="fu">is.na</span>(Ozone)]))</span>
<span id="cb61-10"><a href="rdataioandtransformation.html#cb61-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">mean</span>(Temp[<span class="sc">!</span><span class="fu">is.na</span>(Temp)]))</span>
<span id="cb61-11"><a href="rdataioandtransformation.html#cb61-11" aria-hidden="true" tabindex="-1"></a>})</span></code></pre></div>
<p>위 <code>with</code> 함수에서 보는바와 같이 <code>$</code>를 이용한 변수 접근 대신 <code>with</code>함수 내에서는 (<code>{</code>, <code>}</code> 안에서) 해당 <code>data.frame</code>에 있는 변수 이름을 직접 접근할 수 있으며 따라서 코드의 간결함과 가독성이 향상됩니다.</p>
<p><code>within</code> 함수는 <code>with</code>함수와 같이 <code>{</code>, <code>}</code> 안에서 변수의 이름만으로 해당 변수에 접근이 가능하나 입력된 데이터와 변경된 변수(들)을 반환한다는 점이 다릅니다. 아래 예는 <code>airquality</code> 데이터의 화씨 (Fahrenheit) 온도를 섭씨 (Celsius) 온도로 변환해서 새로운 데이터셋을 만드는 코드입니다. <code>data.frame</code>을 이용한 코드와 비교해 보시기 바랍니다. 데이터셋 내에서 참조할 변수들이 많아질 경우 <code>airquality$xxx</code> 식의 코드를 줄이는 것 만으로도 코드의 가독성과 간결성을 유지할 수 있습니다.</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="rdataioandtransformation.html#cb62-1" aria-hidden="true" tabindex="-1"></a>newairquality <span class="ot">&lt;-</span> <span class="fu">within</span>(airquality, {</span>
<span id="cb62-2"><a href="rdataioandtransformation.html#cb62-2" aria-hidden="true" tabindex="-1"></a>  celsius <span class="ot">=</span> <span class="fu">round</span>((<span class="dv">5</span><span class="sc">*</span>(Temp<span class="dv">-32</span>))<span class="sc">/</span><span class="dv">9</span>, <span class="dv">2</span>)</span>
<span id="cb62-3"><a href="rdataioandtransformation.html#cb62-3" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb62-4"><a href="rdataioandtransformation.html#cb62-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(newairquality)</span>
<span id="cb62-5"><a href="rdataioandtransformation.html#cb62-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-6"><a href="rdataioandtransformation.html#cb62-6" aria-hidden="true" tabindex="-1"></a><span class="do">## data.frame</span></span>
<span id="cb62-7"><a href="rdataioandtransformation.html#cb62-7" aria-hidden="true" tabindex="-1"></a>celsius <span class="ot">&lt;-</span> <span class="fu">round</span>((<span class="dv">5</span><span class="sc">*</span>(airquality<span class="sc">$</span>Temp<span class="dv">-32</span>))<span class="sc">/</span><span class="dv">9</span>, <span class="dv">2</span>)</span>
<span id="cb62-8"><a href="rdataioandtransformation.html#cb62-8" aria-hidden="true" tabindex="-1"></a>newairquality <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(airquality, celsius)</span>
<span id="cb62-9"><a href="rdataioandtransformation.html#cb62-9" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(newairquality)</span></code></pre></div>
<div id="ex5.6.1" class="section level3" number="5.6.1">
<h3><span class="header-section-number">5.6.1</span> Exercise</h3>
<p>다음 df 의 hour, minute, second로 나누어진 값들을 초 단위로 변환하여 seconds라는 변수에 저장한 후 기존 df에 추가한 df2 데이터셋을 만드시오 (<code>within</code> 함수 이용)</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="rdataioandtransformation.html#cb63-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">hour=</span><span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">7</span>, <span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">8</span>),</span>
<span id="cb63-2"><a href="rdataioandtransformation.html#cb63-2" aria-hidden="true" tabindex="-1"></a>                 <span class="at">minute=</span><span class="fu">c</span>(<span class="dv">46</span>, <span class="dv">56</span>, <span class="dv">44</span>, <span class="dv">37</span>, <span class="dv">39</span>),</span>
<span id="cb63-3"><a href="rdataioandtransformation.html#cb63-3" aria-hidden="true" tabindex="-1"></a>                 <span class="at">second=</span><span class="fu">c</span>(<span class="dv">19</span>, <span class="dv">45</span>, <span class="dv">57</span>, <span class="dv">41</span>, <span class="dv">27</span>))</span></code></pre></div>
</div>
</div>
<div id="analysis-example-babies-dataset" class="section level2" number="5.7">
<h2><span class="header-section-number">5.7</span> Analysis example (babies dataset)</h2>
<p><code>UsingR</code> 패키지의 <code>babies</code> 데이터를 이용해서 산모의 흡연 여부와 신생아 몸무게의 관계를 알아보는 분석을 수행해 보겠습니다. 본 강의를 통해 배우지 않은 내용들이 있지만 코드를 따라 가면서 참고하시기 바랍니다. 우선 <code>UsingR</code> 패키지를 로딩합니다. 산모의 임신 기간이 (gestation) 999로 표기된 데이터는 명백히 에러이며 이들을 <code>NA</code>로 처리합니다.</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="rdataioandtransformation.html#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(UsingR)</span>
<span id="cb64-2"><a href="rdataioandtransformation.html#cb64-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(babies)</span>
<span id="cb64-3"><a href="rdataioandtransformation.html#cb64-3" aria-hidden="true" tabindex="-1"></a><span class="do">## a simple way to checkout the data</span></span>
<span id="cb64-4"><a href="rdataioandtransformation.html#cb64-4" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(babies<span class="sc">$</span>gestation)  </span>
<span id="cb64-5"><a href="rdataioandtransformation.html#cb64-5" aria-hidden="true" tabindex="-1"></a>babies<span class="sc">$</span>gestation[babies<span class="sc">$</span>gestation<span class="sc">&gt;</span><span class="dv">900</span>] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb64-6"><a href="rdataioandtransformation.html#cb64-6" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(babies)</span></code></pre></div>
<p>아래와 같이 <code>within</code> 함수를 사용해서 <code>babies$</code> 를 반복해서 입력해주는 불편함을 줄이고 가독성을 높입니다. 똑같은 방법으로 <code>dwt</code> (아빠의 몸무게) 변수의 에러값들에 대해서도 <code>NA</code> 처리를 할 수 있습니다.</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="rdataioandtransformation.html#cb65-1" aria-hidden="true" tabindex="-1"></a>new_babies <span class="ot">&lt;-</span> <span class="fu">within</span>(babies, {</span>
<span id="cb65-2"><a href="rdataioandtransformation.html#cb65-2" aria-hidden="true" tabindex="-1"></a>  gestation[gestation<span class="sc">==</span><span class="dv">999</span>] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb65-3"><a href="rdataioandtransformation.html#cb65-3" aria-hidden="true" tabindex="-1"></a>  dwt[dwt<span class="sc">==</span><span class="dv">999</span>] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb65-4"><a href="rdataioandtransformation.html#cb65-4" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb65-5"><a href="rdataioandtransformation.html#cb65-5" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(new_babies)</span></code></pre></div>
<p><code>smoke</code> 변수는 흡연 여부를 나타내는 범주형 변수로 0, 1, 2, 3 값은 의미가 없습니다. 사람이 읽을 수 있는 label을 붙인 <code>factor</code> 형 변수로 변환하는 코드도 함께 작성해 보겠습니다.</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="rdataioandtransformation.html#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(babies<span class="sc">$</span>smoke)</span>
<span id="cb66-2"><a href="rdataioandtransformation.html#cb66-2" aria-hidden="true" tabindex="-1"></a>new_babies <span class="ot">&lt;-</span> <span class="fu">within</span>(babies, {</span>
<span id="cb66-3"><a href="rdataioandtransformation.html#cb66-3" aria-hidden="true" tabindex="-1"></a>  gestation[gestation<span class="sc">==</span><span class="dv">999</span>] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb66-4"><a href="rdataioandtransformation.html#cb66-4" aria-hidden="true" tabindex="-1"></a>  dwt[dwt<span class="sc">==</span><span class="dv">999</span>] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb66-5"><a href="rdataioandtransformation.html#cb66-5" aria-hidden="true" tabindex="-1"></a>  smoke <span class="ot">=</span> <span class="fu">factor</span>(smoke)</span>
<span id="cb66-6"><a href="rdataioandtransformation.html#cb66-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">levels</span>(smoke) <span class="ot">=</span> <span class="fu">list</span>(</span>
<span id="cb66-7"><a href="rdataioandtransformation.html#cb66-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;never&quot;</span> <span class="ot">=</span> <span class="dv">0</span>, </span>
<span id="cb66-8"><a href="rdataioandtransformation.html#cb66-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;smoke now&quot;</span> <span class="ot">=</span> <span class="dv">1</span>, </span>
<span id="cb66-9"><a href="rdataioandtransformation.html#cb66-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;until current pregnancy&quot;</span> <span class="ot">=</span> <span class="dv">2</span>,</span>
<span id="cb66-10"><a href="rdataioandtransformation.html#cb66-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;once did, not now&quot;</span> <span class="ot">=</span> <span class="dv">3</span>)</span>
<span id="cb66-11"><a href="rdataioandtransformation.html#cb66-11" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb66-12"><a href="rdataioandtransformation.html#cb66-12" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(new_babies<span class="sc">$</span>smoke)</span></code></pre></div>
<p>이제 임신기간과 흡연 여부를 분석해 볼 수 있습니다. 흡연 그룹별로 기간에 차이가 있는지를 알아보는 분석은 t-test나 ANOVA를 사용할 수 있습니다.</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="rdataioandtransformation.html#cb67-1" aria-hidden="true" tabindex="-1"></a>fit <span class="ot">&lt;-</span> <span class="fu">lm</span>(gestation<span class="sc">~</span>smoke, new_babies)</span>
<span id="cb67-2"><a href="rdataioandtransformation.html#cb67-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(fit) <span class="do">## t-test 결과 </span></span>
<span id="cb67-3"><a href="rdataioandtransformation.html#cb67-3" aria-hidden="true" tabindex="-1"></a><span class="fu">anova</span>(fit)</span></code></pre></div>
<p>간단히 결과를 보면 <code>summary(fit)</code>은 3가지 t-test의 결과를 보여줍니다. never vs. smoke new 의 경우 t값이 -1.657로 피우지 않은 경우에 비해서 피우는 사람의 임신 기간이 유의하게 줄어들었음을 알 수 있습니다. 그에 비해서 현재 흡연하지 않는 경우 (never vs. until current pregnancy 또는 never vs. once did, not now) 차이가 없는 것으로 나옵니다.</p>
<p>이제 smoke now 인 경우 또는 나이가 25세 미만인 경우의 샘플에 대해서 <code>newdf</code>를 만들어 봅니다 (<code>subset</code> 함수 사용, id, gestation, age, wt, smoke 변수 선택). 이 후 <code>ggplot</code>을 이용하여 몸무게와 임신기간의 산점도를 그려보면 크게 다르진 않으나 흡연하는 여성 중 몸무게가 적게 나가는 여성에게서 짧은 임신기간을 갖는 경향을 볼 수 있습니다.</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="rdataioandtransformation.html#cb68-1" aria-hidden="true" tabindex="-1"></a>newdf <span class="ot">&lt;-</span> <span class="fu">subset</span>(new_babies, (smoke<span class="sc">==</span><span class="st">&quot;smoke now&quot;</span> <span class="sc">|</span> smoke <span class="sc">==</span> <span class="st">&quot;never&quot;</span>) <span class="sc">&amp;</span> age <span class="sc">&lt;</span> <span class="dv">25</span>, <span class="at">select=</span><span class="fu">c</span>(id, gestation, age, wt, smoke))</span>
<span id="cb68-2"><a href="rdataioandtransformation.html#cb68-2" aria-hidden="true" tabindex="-1"></a><span class="co"># ggplot(newdf, aes(x=wt, y=gestation, color=smoke)) +</span></span>
<span id="cb68-3"><a href="rdataioandtransformation.html#cb68-3" aria-hidden="true" tabindex="-1"></a><span class="co">#   geom_point(size=3, alpha=0.5) +</span></span>
<span id="cb68-4"><a href="rdataioandtransformation.html#cb68-4" aria-hidden="true" tabindex="-1"></a><span class="co">#   facet_grid(.~smoke) + </span></span>
<span id="cb68-5"><a href="rdataioandtransformation.html#cb68-5" aria-hidden="true" tabindex="-1"></a><span class="co">#   theme_bw()</span></span></code></pre></div>
<hr />
<p><a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/4.0/"><img src="https://i.creativecommons.org/l/by-nc-nd/4.0/88x31.png" alt="크리에이티브 커먼즈 라이선스" style="border-width:0"/></a><br />이 저작물은 <a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/4.0/">크리에이티브 커먼즈 저작자표시-비영리-변경금지 4.0 국제 라이선스</a>에 따라 이용할 수 있습니다.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="r-language-basics-ii-objects.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="rdatatransngrapics.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["Rprog2021.pdf"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
